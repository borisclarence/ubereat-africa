<!-- Main navigation -->

  <!-- Full Page Intro -->
  <section style="background-image: url('/assets/img/sample.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
    <!-- Mask & flexbox options-->
    <div class="mask d-flex justify-content-center align-items-center">
      <!-- Content -->
      <div class="container py-5 my-5">

        <h3 class="font-weight-bold text-center white-text pb-2"></h3>


        <!--Grid row-->
        <div class="row d-flex align-items-center justify-content-center ">
          <!--Grid column-->
          <div class="col-md-6 col-xl-5 pb-5 mb-5 pt-1">
            <!--Form-->
            <form class="" enctype="multipart/form-data" id="fileregister" name="fileregister" action="#" method="post">

            <div class="card">
              <div class="card-body z-depth-2 px-4">
                <!--div class="md-form mt-3">
                  <i class="fa fa-user prefix grey-text"></i>
                  <input type="text" id="form3" class="form-control">
                  <label for="form3">Your name</label>
                </div-->
                <p class="lead text-center black-text pt-2 mb-5"><i class="fa fa-user prefix grey-text"></i> Signup</p>

                <select id="usersex" class="form-control col-md-3 mb-2" name="">
                  <option value="Masculin">M.</option>
                  <option value="Feminin">Mme</option>
                </select>
                <div class="form-row mb-4">
                  <div class="col">
                    <!-- First name -->
                    <input type="text" id="firstname" class="form-control" placeholder="First name">
                  </div>
                  <div class="col">
                    <!-- Last name -->
                    <input type="text" id="lastname" class="form-control" placeholder="Last name">
                  </div>
                </div>

                <div class="form-row mb-4">
                  <div class="col">
                    <!-- First name -->
                    <input type="text" id="adress_street" class="form-control" placeholder="Adresse street">
                  </div>
                  <div class="col">
                    <!-- Last name -->
                    <select id="profil_id" class="form-control" name="">
                      <option value="Masculin">Administrateur</option>
                      <option value="Feminin">Vendeur</option>
                    </select>
                  </div>
                </div>

                <div class="form-row mb-4">
                  <div class="col">
                    <!-- Phone number -->
                    <input type="number" id="phone_number" class="form-control" placeholder="Phone number"
                      aria-describedby="defaultRegisterFormPhoneHelpBlock">
                  </div>
                  <div class="col">
                    <!-- Last name -->
                    <input type="file" id="picture_user" class="form-control" placeholder="Picture">
                  </div>
                </div>

                <!-- E-mail -->
                <input type="email" id="email_user" class="form-control mb-4" placeholder="E-mail">

                <!-- Password -->
                <input type="password" id="password_user" class="form-control" placeholder="Password"
                  aria-describedby="defaultRegisterFormPasswordHelpBlock">
                <small id="defaultRegisterFormPasswordHelpBlock" class="form-text text-muted mb-4">
                  Au moins 8 caractères et 1 chiffre
                </small>

                <!-- Newsletter -->
                <!--div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="defaultRegisterFormNewsletter">
                  <label class="custom-control-label" for="defaultRegisterFormNewsletter">Subscribe to our
                    newsletter</label>
                </div-->
                <div class="text-center my-3">
                  <button type="button" class="btn btn-indigo btn-block" onclick="validateUser()">Valider</button>
                </div>
                <p class="mr-4" for="defaultContactFormCopy">Déjà inscris? <a href="/"> connectez-vous ici!</a></p>
              </div>
            </div>

            </form>
            <!--/.Form-->
          </div>
          <!--Grid column-->
        </div>
        <!--Grid row-->
      </div>
      <!-- Content -->
    </div>
    <!-- Mask & flexbox options-->
  </section>
  <!-- Full Page Intro -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
<!--script type="text/javascript" src="https://code.jquery.com/jquery-1.12.1.min.js"></script-->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.js">
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.min.js">
</script>
<!-- Main navigation -->
<script type="text/javascript">
jQuery().ready(function() {
//var v = jQuery("#fileregister").validate({

/*jQuery.validator.setDefaults({
  debug: true,
  success: "valid"
});*/
$("#fileregister").validate({
    rules: {
      firstname: {
        required: true,
        minlength: 2,
        maxlength: 400,
      },
      lastname: {
        required: true,
        minlength: 2,
        maxlength: 400,
      },
      adress_street: {
        required: true,
        minlength: 2,
        maxlength: 400,
      },
      phone_number: {
        required: true,
        number: true,
        minlength: 2,
        maxlength: 300,
      },
      email_user: {
        required: true,
        minlength: 6,
        email: true,
        maxlength: 100,
      },
      password_user: {
        required: true,
        minlength: 6,
        //equalTo: "#upass1",
      }

    },
    //errorElement: "span",
    //errorClass: "help-inline-error",
  });

    });
</script>
<script type="text/javascript">
  function validateUser() {

    var formData = new FormData();


    var usersex = $('#usersex').val();
    var firstname = $('#firstname').val();
    var lastname = $('#lastname').val();
    var adress_street = $('#adress_street').val();
    var picture_user = $('#picture_user').val();
    var phone_number = $('#phone_number').val();
    var email_user = $('#email_user').val();
    var password_user = $('#password_user').val();

    formData.append('firstname', firstname);
    formData.append('usersex', usersex);
    formData.append('lastname', lastname);
    formData.append('adress_street', adress_street);
    formData.append('phone_number', phone_number);
    formData.append('email_user', email_user);
    formData.append('password_user', password_user);
    formData.append('picture_user', document.getElementById('picture_user').files[0] );

    alert(email_user);

    $.ajax({
      url: '/signup',
      data: formData,
      processData: false,
      contentType: false,
      type: 'POST',
      success: function(data){
        console.log(data);
        alert(data);
      },
      error: function(errResponse) {
          console.log(errResponse);
      }
    });

  }

</script>
